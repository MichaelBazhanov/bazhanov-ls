(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{125:function(t,e,a){"use strict";a.r(e);var r=a(3),n=a.n(r),o=a(5),c=a.n(o);e.default={namespaced:!0,state:{data:[]},mutations:{SET_REVIEWS:function(t,e){return t.data=e},ADD_REVIEW:function(t,e){return t.data.unshift(e)},EDIT_REVIEW:function(t,e){t.data=t.data.map((function(t){return t.id==e.id?e:t}))},REMOVE_REVIEW:function(t,e){t.data=t.data.filter((function(t){return t.id!=e.id}))}},actions:{fetch:function(t){var e=this;return c()(n.a.mark((function a(){var r,o;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=t.rootGetters["user/userId"],a.next=4,e.$axios.get("/reviews/".concat(r));case 4:(o=a.sent).data.forEach((function(t){t.photo=e.$axios.defaults.baseURL+"/"+t.photo})),t.commit("SET_REVIEWS",o.data.reverse()),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.error(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},add:function(t,e){var a=this;return c()(n.a.mark((function r(){var o,c;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=new FormData,Object.keys(e).forEach((function(t){o.append(t,e[t])})),r.prev=2,r.next=5,a.$axios.post("/reviews",o);case 5:(c=r.sent).data.photo=a.$axios.defaults.baseURL+"/"+c.data.photo,t.commit("ADD_REVIEW",c.data),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),console.error(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()},edit:function(t,e){var a=this;return c()(n.a.mark((function r(){var o,c,s;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=new FormData,Object.keys(e).forEach((function(t){o.append(t,e[t])})),r.prev=2,r.next=5,a.$axios.post("/reviews/".concat(e.id),o);case 5:c=r.sent,s=c.data,e.photo=a.$axios.defaults.baseURL+"/"+s.review.photo,t.commit("EDIT_REVIEW",e),r.next=14;break;case 11:throw r.prev=11,r.t0=r.catch(2),new Error(r.t0);case 14:case"end":return r.stop()}}),r,null,[[2,11]])})))()},remove:function(t,e){var a=this;return c()(n.a.mark((function r(){var o;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.$axios.delete("/reviews/".concat(e.id));case 3:o=r.sent,o.data,t.commit("REMOVE_REVIEW",e),r.next=11;break;case 8:throw r.prev=8,r.t0=r.catch(0),new Error(error);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}}}}]);